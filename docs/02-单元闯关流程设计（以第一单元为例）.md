# 单元闯关流程设计（以第一单元为例）

目标：先把“一个单元”做成可完整闭环（进入→剧情→答题→反馈→结算→勋章/进度→复盘），再复制到 8 单元。

## 1. 第一单元设定（🐸 水滴镇：小蝌蚪找妈妈）
- **关卡 ID**：`u1`
- **区域名**：水滴镇
- **主题故事**：帮助小蝌蚪通过识字、辨音、拼句找到妈妈。
- **主角色**：朱迪警官（引导）、水滴镇小蝌蚪（反馈/投喂）、尼克（拼句）、闪电（辨析）

## 2. 入口与新手引导（首次进入 u1）
1) 地图点击“水滴镇（第一单元）”
2) 出现 10~20 秒剧情卡片（可跳过）：
   - 朱迪：今天要帮助小蝌蚪找到妈妈！
   - 规则：每次闯关题目都会变，答对越多奖励越多。
3) 选择模式（MVP 建议默认“混合闯关”）：
   - 混合闯关（推荐）
   - 专项训练：拼音认读 / 字词辨析 / 拼句

## 3. 一局 Run 的结构（MVP）
- 每局：10 题
- 每题都有即时反馈（对/错）
- 结算：得分、星级、勋章变化、建议复盘

### 3.1 题型配比（u1）
- T1 拼音认读：5 题
- T2 字词辨析：2 题（抽不到则先用“易混拼音/形近字”替代）
- T3 句子仿写：3 题（至少 1 个模板 + 词库）

> T4/T5 若第一单元资料有对应内容，则将 T1 减 1~2 题替换。

### 3.2 随机化（避免背答案）
- 每局生成 `seed`，用于：
  - 抽取知识点条目
  - 题型顺序
  - 选项顺序
  -（后续）挖空位置/连线打乱
- 规则：
  - 同一局同一知识点不重复
  - 优先覆盖更多知识点（覆盖率）

## 4. 关内交互（每题的最小闭环）
1) 题目出现（朱迪发卡/尼克拼句/闪电选词）
2) 孩子操作（点选/拖拽）
3) 即时反馈：
   - 正确：投喂成功/线索点亮/动画 + 1 分
   - 错误：轻量提示（不打击）："没关系，再试一次"，并显示正确答案（MVP 可显示）
4) 进入下一题

## 5. 结算页（Run 完成后）
展示：
- 分数：0~100
- 正确题数：x/10
- 星级（建议）：
  - 60~79：⭐
  - 80~94：⭐⭐（通关）
  - 95~100：⭐⭐⭐（完美）
- 本次新获得勋章（若有）
- “再来一局（换题）/回地图”

> 注：星级是一种“更温和的通关”，比硬阈值更适合二年级。

## 6. 失败也给勋章（不挫败）
- 如果本次未达到 ⭐⭐：计为一次失败（fail +1）
- 当累计失败达到阈值：授予坚持类勋章（见勋章文档）
- 文案：
  - "你已经很努力了！再来一次就更熟练了。"

## 7. 复盘（MVP 最简）
- 结算页提供“错题回看”入口（MVP 可以只列出错题题干 + 正确答案）
- 未来可扩：错题本、间隔重复、掌握度模型

## 8. 复制到 8 单元的方法
- 每个单元都复用同一套 Run 引擎（seed + generator + grading + badge）
- 差异只来自：
  - 单元的内容（content items）
  - 题型占比
  - 关卡主题皮肤与角色文案
