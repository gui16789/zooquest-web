# 单元闯关流程设计（以第一单元为例）

目标：先把“一个单元”做成可完整闭环（进入→剧情→答题→反馈→结算→勋章/进度→复盘），再复制到 8 单元。

## 1. 第一单元设定（🐸 水滴镇：小蝌蚪找妈妈）
- **关卡 ID**：`u1`
- **区域名**：水滴镇
- **主题故事**：帮助小蝌蚪通过识字、辨音、拼句找到妈妈。
- **主角色**：朱迪警官（引导）、水滴镇小蝌蚪（反馈/投喂）、尼克（拼句）、闪电（辨析）

## 2. 入口与新手引导（首次进入 u1）
1) 地图点击“水滴镇（第一单元）”
2) 出现 10~20 秒剧情卡片（可跳过）：
   - 朱迪：今天要帮助小蝌蚪找到妈妈！
   - 规则：每次闯关题目都会变，答对越多奖励越多。
3) 选择模式（MVP 建议默认“混合闯关”）：
   - 混合闯关（推荐）
   - 专项训练：拼音认读 / 字词辨析 / 拼句

## 3. 一局 Run 的结构（普通关改版 v1）
- 每局：**5 题（固定）**
- 以“分阶段小游戏”呈现（一次只显示当前题，逐题推进）
- 每题都有即时反馈（对/错）+ **一句话解析**（错题必出，答对可简短提示）
- 结算：得分、星级、勋章变化、复盘建议

### 3.1 分阶段与题型配比（u1）
- 阶段 A：投喂小蝌蚪（T1 拼音认读）2 题
- 阶段 B：闪电抉择（T2 字词辨析）2 题
- 阶段 C：尼克拼句（T3 句子仿写）1 题

> 设计说明：5 题能兼容现有星级阈值（60/80/95）。4/5=80 可通关，1 题容错不挫败。

### 3.2 随机化（避免背答案）
- 每局生成 `seed`，用于：
  - 抽取知识点条目
  -（在阶段内）题目与素材的抽取
  - 选项顺序
  -（后续）挖空位置/连线打乱
- 规则：
  - 同一局同一知识点不重复
  - 阶段顺序固定（A→B→C），阶段内题目随机
  - 优先覆盖更多知识点（覆盖率）

## 4. 关内交互（每题的最小闭环）
1) 阶段开场卡（可跳过）：投喂 / 抉择 / 拼句
2) 题目出现（朱迪发卡/尼克拼句/闪电选词）
3) 孩子操作（点选/拖拽）
4) 即时反馈（不打击、强化记忆）：
   - 正确：轻量表扬 + 小奖励（投喂成功/线索点亮）
   - 错误："没关系，我们看看正确答案" + **一句话解析**（为什么是这个）
5) 进入下一题（逐题推进）


## 5. 结算页（Run 完成后）
展示：
- 分数：0~100
- 正确题数：x/5
- 星级（建议）：
  - 60~79：⭐
  - 80~94：⭐⭐（通关）
  - 95~100：⭐⭐⭐（完美）
- 本次新获得勋章（若有）
- “再来一局（换题）/回地图”

> 注：星级是一种“更温和的通关”，比硬阈值更适合二年级。

## 6. 失败也给勋章（不挫败）
- 如果本次未达到 ⭐⭐：计为一次失败（fail +1）
- 当累计失败达到阈值：授予坚持类勋章（见勋章文档）
- 文案：
  - "你已经很努力了！再来一次就更熟练了。"

## 7. 复盘（MVP 最简）
- 结算页提供“错题回看”入口（MVP 可以只列出错题题干 + 正确答案）
- 未来可扩：错题本、间隔重复、掌握度模型

## 8. 复制到 8 单元的方法
- 每个单元都复用同一套 Run 引擎（seed + generator + grading + badge）
- 差异只来自：
  - 单元的内容（content items）
  - 题型占比
  - 关卡主题皮肤与角色文案
